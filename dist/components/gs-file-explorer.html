<link rel="import" href="gs-file-explorer-item.html">
<link rel="import" href="gs-context-menu.html">
<dom-module id="gs-file-explorer">
  <template>
    <style>
      .listContainer {
        margin: 0px;
        padding: 0;
        list-style-type: none;
      }

      /*# sourceMappingURL=style.css.map */

    </style>


    <div>
       <ul class="listContainer">
          <template is="dom-repeat" items="{{files}}" as="file">
             <li> <gs-file-explorer-item data={{file}}> </gs-file-explorer-item></li>
          </template>
        </ul>

    </div>

    <gs-context-menu id="optionsMenu"> </gs-context-menu>
  </template>
  <script>
    Polymer({
      is: 'gs-file-explorer',
      properties: {
        files: {
          type: [],
          value: []
        }
      },
      listeners: {
        'openGsContextMenu': 'displayOptions',
        'processOption': 'makeAction'
      },
      makeAction: function(polymer_event) {
        var option;
        option = polymer_event.detail.file;
        option.action();
        return this.closeOptions();
      },
      created: function() {
        return this.closeOptions = (function(_this) {
          return function() {
            _this.contextMenu.hideMenu();
            return document.removeEventListener('mousedown', _this.closeOptions);
          };
        })(this);
      },
      addFile: function(file) {
        return this.push('files', file);
      },
      attached: function() {
        return this.contextMenu = this.$.optionsMenu;
      },
      displayOptions: function(polymer_event) {
        this.contextMenu.addOptions(polymer_event.detail.file.options);
        this.contextMenu.showMenu();
        document.addEventListener('mousedown', this.closeOptions);
        return polymer_event.preventDefault();
      }
    });

  </script>
</dom-module>